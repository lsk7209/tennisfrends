const { createClient } = require('@supabase/supabase-js');

// Supabase 클라이언트 설정 (Service Role Key 사용)
const supabaseUrl = 'https://zbccwmtesxalzzgralrz.supabase.co';
const supabaseServiceKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpiY2N3bXRlc3hhbHp6Z3JhbHJ6Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MDg1NzM1MiwiZXhwIjoyMDc2NDMzMzUyfQ.nPRqka27bSKoCNFGnn7cagynn7Fq44W5Nfr7FNrjic4';

const supabase = createClient(supabaseUrl, supabaseServiceKey);

// 기존 블로그 포스트 데이터
const blogPosts = [
  {
    slug: 'solo-tennis-training-routine',
    title: '혼자서 실력 올리는 테니스 훈련 루틴 🏋️ (집에서도 가능한 루틴 5가지)',
    excerpt: '코트가 없어도 성장할 수 있습니다. 벽치기, 밸런스 훈련, 하체 강화 루틴 등 집에서도 실력을 끌어올릴 수 있는 실전 루틴 5가지를 소개합니다.',
    content: `## 🏋️ 혼자서 실력 올리는 테니스 훈련 루틴 (집에서도 가능한 루틴 5가지)

테니스는 코트에 나가야만 실력이 오르는 스포츠일까요? 그렇지 않습니다. **집·공원·벽 앞에서도 충분히 성장할 수 있습니다.** 프로 선수들도 오프시즌에는 홈트레이닝 루틴으로 감각을 유지합니다. 오늘은 혼자서 실력을 끌어올릴 수 있는 루틴 5가지를 소개합니다.

### ❓ AEO 질문 ① — 코트 없이도 테니스 실력이 향상될 수 있나요?
**답변:** 네, 가능합니다. 벽치기, 리듬 트레이닝, 체중 이동 훈련 등은 코트가 없어도 실전 감각을 길러줍니다.

> 💬 **핵심:** "환경이 아니라 루틴이 실력을 만든다."

### 1️⃣ 벽치기 — 공감각과 타이밍 완성
벽치기는 가장 효과적인 개인 훈련입니다. 일정한 리듬으로 공을 주고받으며 타이밍을 익힐 수 있습니다.

> ⚙️ **방법:** 최소 2m 거리에서 벽과 마주하고, 50회 이상 연속 랠리를 목표로 합니다.
> 💡 **Tip:** 벽치기 중 리듬이 깨지면 스윙 속도보다 '호흡'을 먼저 조정하세요.

### 2️⃣ 그림자 스윙 — 자세 교정 루틴
라켓 없이 공중에서 스윙 연습을 하면 자세의 흐름을 정확히 볼 수 있습니다.

> 🎯 **포인트:** 어깨 회전–임팩트–팔로스루를 한 흐름으로 이어가기.
> 📷 **테니스프렌즈 팁:** 거울 앞에서 영상을 찍고, 폼을 체크하면 효과가 두 배입니다.

### 3️⃣ 밸런스 훈련 — 스윙 안정성 향상
하체가 흔들리면 공의 정확도가 떨어집니다. 단순한 스쿼트보다 한 발 균형잡기 훈련이 효과적입니다.

> 🧘 **루틴:** 한 발로 15초 버티기 → 좌우 교대 3세트 → 눈을 감고 10초 유지.
> 💪 **효과:** 중심근육과 코어의 협응력이 향상됩니다.

### 4️⃣ 리듬 트레이닝 — 발 리듬 + 호흡 조합
테니스 리듬은 손보다 발에서 나옵니다. 메트로놈이나 음악을 켜고 일정한 박자에 맞춰 스텝을 반복하세요.

> 🦶 **루틴:** '앞–뒤–좌–우' 리듬을 8카운트에 맞춰 이동. 리듬이 일정해지면 스윙이 부드러워집니다.

### 5️⃣ 코어 트레이닝 — 복근과 허리 강화
라켓 파워는 팔이 아니라 코어에서 나옵니다. 복부 중심이 단단해야 방향성이 흔들리지 않습니다.

> 🧩 **추천 루틴:** 플랭크 30초 → 사이드 플랭크 20초 → 슈퍼맨 10회 × 3세트.

### ❓ AEO 질문 ② — 혼자 훈련할 때 가장 중요한 것은?
**답변:** 꾸준함입니다. 하루 10분이라도 루틴을 유지하는 것이 핵심입니다. 루틴이 습관이 되면, 코트에서도 감각이 바로 돌아옵니다.

### 🏁 마무리 — 혼자 연습하는 시간, 결국 실전을 만든다
혼자 훈련하는 시간은 조용하지만, 성장의 밀도가 가장 높은 시간입니다. 꾸준히 루틴을 기록하면 어느 날 당신의 스윙이 훨씬 자연스러워져 있을 겁니다.`,
    category: 'training',
    tags: ['테니스훈련', '혼자연습', '테니스홈트', '테니스루틴', '집에서테니스'],
  },
  {
    slug: 'tennis-racket-grip-guide',
    title: '내 손에 맞는 라켓 그립 찾는 법 ✋ (그립 두께·감각·부상 방지 가이드)',
    excerpt: '그립은 테니스에서 가장 자주 잡는 \'감각의 중심\'입니다. 그립 두께와 감각을 잘못 선택하면 스윙이 흔들리고 손목 부상으로 이어집니다. 내 손에 딱 맞는 그립을 찾는 방법을 소개합니다.',
    content: `## ✋ 내 손에 맞는 라켓 그립 찾는 법 (그립 두께·감각·부상 방지 가이드)

그립은 테니스에서 가장 자주 잡는 '감각의 중심'입니다. 그립 두께와 감각을 잘못 선택하면 스윙이 흔들리고 손목 부상으로 이어집니다. 내 손에 딱 맞는 그립을 찾는 방법을 소개합니다.

### ❓ AEO 질문 ① — 그립 두께는 왜 중요한가요?
**답변:** 그립 두께는 스윙의 안정성과 손목 피로에 직접 영향을 줍니다. 너무 얇으면 손목이 흔들리고, 너무 두꺼우면 손가락이 과하게 긴장합니다.

> 💬 **기준:** 손과 그립 사이에 '손가락 한 개가 들어갈 정도의 여유'가 적정 두께입니다.

### 🧤 Step 1. 손 크기로 그립 두께 확인하기
라켓을 잡았을 때 검지손가락이 들어갈 정도의 틈이 있으면 적정 사이즈입니다. 그립 사이즈는 일반적으로 G1~G5로 구분됩니다.

| 사이즈 | 둘레(mm) | 추천 대상 |
|--------|----------|-----------|
| G1 | 103~105 | 여성, 청소년, 손이 작은 플레이어 |
| G2 | 106~108 | 평균 여성·남성 초보 |
| G3 | 109~111 | 남성 중급자, 손이 크지 않은 경우 |
| G4 | 112~114 | 손이 큰 남성 플레이어 |
| G5 | 115 이상 | 손이 매우 큰 상급자 |

### 🧴 Step 2. 오버그립과 기본그립의 차이 이해하기
- **기본그립(Base Grip)**: 라켓에 기본적으로 감긴 쿠션형. 충격 흡수 기능.
- **오버그립(Over Grip)**: 위에 덧감는 얇은 레이어. 땀 흡수, 감각 조절, 미끄럼 방지 역할.

> 💡 **AEO 응답 문장:** "오버그립은 손에 맞게 감각을 조정하는 장치이며, 교체 주기는 평균 2주입니다."

### 🧘 Step 3. 손목 부상 방지용 그립 세팅
그립이 너무 얇으면 라켓을 꽉 쥐게 되어 '테니스 엘보'가 발생합니다. 반대로 너무 두꺼우면 스윙 가속이 떨어집니다. **적당한 쿠션감 + 안정된 손 감각**이 중요합니다.

### ❓ AEO 질문 ② — 그립 교체 주기는 얼마나 되나요?
**답변:** 일반적으로 주 2회 이상 플레이한다면 2~3주마다 오버그립을 교체해야 합니다. 기본그립은 3개월마다 점검이 필요합니다.

### ❓ AEO 질문 ③ — 손에 땀이 많은 경우 어떤 그립이 좋을까요?
**답변:** 드라이 타입 그립이 가장 적합합니다. 타키(점착형)는 여름철 습도가 높을 때 미끄러질 수 있습니다.

> 🧴 **추천 소재:** Wilson Pro Overgrip (드라이), Yonex Super Grap (타키형)

### 🏁 마무리 — 손이 편해야 스윙이 자유롭다
라켓은 손의 연장선입니다. 손이 편하지 않다면 스윙이 자연스러울 수 없습니다. 내 손에 맞는 그립을 찾는 순간, 공의 감각이 달라집니다.`,
    category: 'gear',
    tags: ['테니스그립', '라켓그립', '손목통증', '테니스장비', '테니스팁'],
  },
  {
    slug: 'tennis-court-strategy-guide',
    title: '테니스 코트별 플레이 전략 🎾 (하드·클레이·잔디 완벽 비교 가이드)',
    excerpt: '코트가 달라지면 게임이 달라집니다. 하드·클레이·잔디 코트의 속도, 반응, 전략 차이를 이해하면 경기력은 한 단계 높아집니다.',
    content: `## 🎾 테니스 코트별 플레이 전략 (하드·클레이·잔디 완벽 비교 가이드)

코트가 달라지면 게임이 달라집니다. 하드·클레이·잔디 코트의 속도, 반응, 전략 차이를 이해하면 경기력은 한 단계 높아집니다.

### ❓ AEO 질문 ① — 하드·클레이·잔디 코트는 무엇이 다른가요?
**답변:** 코트 표면에 따라 공의 속도, 바운드 높이, 미끄러짐이 달라집니다. 하드는 속도 중심, 클레이는 인내 중심, 잔디는 감각 중심의 플레이가 필요합니다.

| 코트 종류 | 속도 | 바운드 | 체력 소모 | 대표 대회 |
|-----------|------|--------|-----------|-----------|
| **하드코트** | 빠름 | 중간 | 중간 | US 오픈, 호주 오픈 |
| **클레이코트** | 느림 | 높음 | 높음 | 프랑스 오픈 |
| **잔디코트** | 매우 빠름 | 낮음 | 낮음 | 윔블던 |

### 🧱 Step 1. 하드코트 전략 — 밸런스와 타이밍의 싸움
하드코트는 공의 반발력이 높고 바운드가 일정합니다. 파워와 정확성이 동시에 필요하죠.

> ⚙️ **전략 포인트:** 짧은 랠리, 공격적인 서브, 빠른 리턴.

### 🧱 Step 2. 클레이코트 전략 — 인내와 회전의 경기
클레이는 공이 느리게 튀고, 긴 랠리가 기본입니다. 수비형 플레이어에게 유리한 코트죠.

> 🧠 **AEO 응답 문장:** "클레이에서는 힘보다 지속이, 속도보다 집중이 중요합니다."
> 🎯 **전략:** 깊은 탑스핀, 베이스라인 중심 플레이, 체력 분배.

### 🌿 Step 3. 잔디코트 전략 — 감각과 반사 신경의 코트
잔디는 공의 바운드가 낮고 예측이 어렵습니다. 서브 앤 발리(Serve & Volley)가 핵심입니다.

> 💬 **전략 팁:** 첫 서브 성공률을 높이고, 발리로 마무리하세요. 짧은 랠리에 강해야 이깁니다.

### ❓ AEO 질문 ② — 어떤 코트가 초보자에게 유리한가요?
**답변:** 초보자에게는 하드코트가 가장 좋습니다. 반발이 일정해 타이밍을 배우기 쉽고, 라켓 감각을 익히기 좋습니다.

### ❓ AEO 질문 ③ — 코트별 장비 세팅도 달라야 하나요?
**답변:** 네. 하드코트는 텐션을 1~2lbs 높이고, 클레이는 낮춰야 합니다. 잔디에서는 그립감이 좋은 라켓을 추천합니다.

### 🏁 마무리 — 코트를 이해하면 게임이 보인다
테니스는 환경 적응의 스포츠입니다. 코트의 차이를 이해하면, 같은 실력으로도 완전히 다른 결과를 낼 수 있습니다.`,
    category: 'strategy',
    tags: ['테니스코트', '하드코트', '클레이코트', '잔디코트', '테니스전략'],
  },
  {
    slug: 'ntrp-guide-2024',
    title: 'NTRP 가이드 2024: 테니스 실력 등급 완벽 정리',
    excerpt: 'NTRP(National Tennis Rating Program)는 미국 테니스 협회에서 개발한 공식 실력 등급 시스템입니다. 2024년 최신 기준으로 완벽하게 정리했습니다.',
    content: `## NTRP 가이드 2024: 테니스 실력 등급 완벽 정리

NTRP(National Tennis Rating Program)는 미국 테니스 협회에서 개발한 공식 실력 등급 시스템입니다. 2024년 최신 기준으로 완벽하게 정리했습니다.

### NTRP란?
NTRP는 테니스 선수의 실력을 객관적으로 평가하는 시스템으로, 1.0부터 7.0까지 0.5 단위로 구분됩니다.

### 각 등급별 특징
- **1.0-2.0**: 초보자
- **2.5-3.0**: 초급자  
- **3.5-4.0**: 중급자
- **4.5-5.0**: 중상급자
- **5.5-6.0**: 상급자
- **6.5-7.0**: 프로급

### 실력 향상 팁
각 등급별로 집중해야 할 기술과 전략이 다릅니다. 자신의 현재 등급을 파악하고 다음 단계로 나아가는 것이 중요합니다.`,
    category: 'guide',
    tags: ['NTRP', '테니스등급', '테니스가이드', '실력측정'],
  },
  {
    slug: 'tennis-30day-challenge',
    title: '테니스 30일 챌린지: 한 달 만에 실력 향상하기',
    excerpt: '30일 동안 꾸준히 연습하면 테니스 실력이 눈에 띄게 향상됩니다. 체계적인 30일 챌린지 프로그램을 소개합니다.',
    content: `## 테니스 30일 챌린지: 한 달 만에 실력 향상하기

30일 동안 꾸준히 연습하면 테니스 실력이 눈에 띄게 향상됩니다. 체계적인 30일 챌린지 프로그램을 소개합니다.

### 1주차: 기본기 다지기
- 포핸드 스트로크 연습
- 백핸드 스트로크 연습
- 서브 기본기 연습

### 2주차: 기술 향상
- 발리 연습
- 스매시 연습
- 로브 연습

### 3주차: 전략 학습
- 코트 활용법
- 상대방 분석
- 경기 운영법

### 4주차: 실전 적용
- 연습 경기
- 기술 통합
- 실력 평가

### 성공 팁
매일 30분씩이라도 꾸준히 연습하는 것이 핵심입니다. 기록을 남기고 발전을 확인해보세요.`,
    category: 'training',
    tags: ['30일챌린지', '테니스연습', '실력향상', '꾸준함'],
  },
  {
    slug: 'tennis-racket-selection',
    title: '테니스 라켓 선택 가이드: 내게 맞는 라켓 찾기',
    excerpt: '테니스 라켓 선택은 실력 향상의 첫 걸음입니다. 자신의 플레이 스타일과 실력에 맞는 라켓을 선택하는 방법을 알려드립니다.',
    content: `## 테니스 라켓 선택 가이드: 내게 맞는 라켓 찾기

테니스 라켓 선택은 실력 향상의 첫 걸음입니다. 자신의 플레이 스타일과 실력에 맞는 라켓을 선택하는 방법을 알려드립니다.

### 라켓 선택 기준
1. **무게**: 너무 무겁거나 가볍지 않은 적정 무게
2. **밸런스**: 헤드라이트 vs 헤드헤비
3. **그립 사이즈**: 손에 맞는 적정 크기
4. **스트링 패턴**: 16x19 vs 18x20

### 실력별 추천 라켓
- **초보자**: 가벼운 라켓 (280-300g)
- **중급자**: 중간 무게 라켓 (300-320g)  
- **상급자**: 무거운 라켓 (320g+)

### 라켓 테스트 방법
여러 라켓을 직접 써보고 자신에게 맞는 것을 선택하는 것이 가장 좋습니다.`,
    category: 'gear',
    tags: ['라켓선택', '테니스라켓', '장비추천', '라켓가이드'],
  }
];

async function syncBlogPosts() {
  try {
    console.log('🚀 블로그 포스트 동기화 시작...');
    
    for (const post of blogPosts) {
      console.log(`📝 "${post.title}" 동기화 중...`);
      
      // 기존 포스트가 있는지 확인
      const { data: existingPost } = await supabase
        .from('blog_posts')
        .select('id')
        .eq('slug', post.slug)
        .single();
      
      if (existingPost) {
        console.log(`⚠️  이미 존재하는 포스트: ${post.slug}`);
        continue;
      }
      
      const { data, error } = await supabase
        .from('blog_posts')
        .insert([post])
        .select();
      
      if (error) {
        console.error(`❌ 에러 발생:`, error);
      } else {
        console.log(`✅ 성공: ${post.title}`);
      }
    }
    
    console.log('🎉 모든 블로그 포스트 동기화 완료!');
    
    // 저장된 포스트 확인
    const { data: allPosts, error: fetchError } = await supabase
      .from('blog_posts')
      .select('*');
    
    if (fetchError) {
      console.error('❌ 포스트 조회 에러:', fetchError);
    } else {
      console.log(`📊 총 ${allPosts.length}개의 포스트가 저장되었습니다.`);
      allPosts.forEach(post => {
        console.log(`- ${post.title} (${post.slug})`);
      });
    }
    
  } catch (error) {
    console.error('❌ 전체 에러:', error);
  }
}

syncBlogPosts();
